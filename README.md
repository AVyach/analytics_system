# Analytics – CSV Metrics

Streamlit-приложение для аналитики CSV-датасетов.  
Позволяет загружать собственные CSV-файлы, сопоставлять колонки и рассчитывать:

- базовые статистические метрики по столбцам  
- продуктовые метрики (DAU/MAU, Retention, ARPU, LTV и другие)  

Поддерживает любые схемы данных через ручное сопоставление колонок в интерфейсе.

---

## Назначение проекта

Цель проекта — создать простой и универсальный инструмент для быстрой аналитики данных без необходимости писать SQL или Python-код.  
Проект может использоваться:

- аналитиками и продукт-менеджерами для первичного анализа выгрузок  
- студентами для изучения базовых и продуктовых метрик  
- как pet-project для демонстрации работы с Python-стеком (pandas, numpy, streamlit)

---

## Технологии

- Python 3.10+ (проверено на 3.12, macOS)  
- [Streamlit](https://streamlit.io/) — веб-интерфейс  
- [pandas](https://pandas.pydata.org/) и [numpy](https://numpy.org/) — анализ данных  
- [matplotlib](https://matplotlib.org/) — визуализация  
- Собственные модули:
  - `analytics/metrics.py` — колоночные метрики  
  - `analytics/product_metrics.py` — продуктовые метрики  
  - `analytics/utils.py` — утилиты (чтение CSV, корреляции)  
  - `analytics/metric_info.py` — описание метрик  

---

## Установка

```bash
git clone <репозиторий>
cd analytics

python3 -m venv .venv
source .venv/bin/activate

pip install -U pip setuptools wheel
pip install -r requirements.txt
```

## Запуск

```bash
streamlit run app.py
```
По умолчанию приложение доступно по адресу:
[http://localhost:8501](http://localhost:8501)


## Использование

1. Загрузите CSV или воспользуйтесь демо-датасетом.  
2. Укажите разделитель дробной части (точка или запятая) и кодировку при необходимости.  
3. Сопоставьте колонки (для продуктовых метрик):  
   - `user_id` (обязательно)  
   - `event_time` (обязательно)  
   - `event_name` (обязательно)  
   - `revenue`, `session_id`, `device_type`, `channel`, `feature`, `nps_score` — опционально  
4. Выберите режим обработки времени: оставить как есть, привести к UTC или убрать таймзону.  
5. Во вкладке **Column stats** выберите столбцы и метрики.  
6. Во вкладке **Product metrics** отметьте нужные метрики и параметры анализа.  

## Ожидаемые колонки

Минимальный набор:
- `user_id` — идентификатор пользователя  
- `event_time` — время события  
- `event_name` — название события  

Опционально:
- `revenue` — сумма покупки  
- `session_id` — идентификатор сессии  
- `device_type` — устройство  
- `channel` — источник трафика  
- `feature` — используемая фича  
- `nps_score` — оценка NPS (0–10)

## Метрики

### Колоночные метрики

- mean — среднее  
- median — медиана  
- std — стандартное отклонение  
- min / max / sum — минимум, максимум, сумма  
- q05, q25, q50, q75, q95 — перцентили  
- iqr — межквартильный размах  
- nunique — количество уникальных  
- unique_share_pct — доля уникальных  
- missing / missing_pct — количество и доля пропусков  
- zeros / negatives / positives — количество нулей, отрицательных и положительных  
- skew — асимметрия  
- kurtosis — эксцесс  
- частоты значений (Top-N)  
- корреляционная матрица (числовые признаки)  
- гистограммы  

### Продуктовые метрики

| Метрика                              | Пояснение                                                   |
|--------------------------------------|-------------------------------------------------------------|
| DAU                                  | Уникальные активные пользователи за день                    |
| MAU                                  | Уникальные активные пользователи за месяц                   |
| Sticky factor                        | Отношение DAU к MAU                                         |
| New users                            | Новые пользователи                                          |
| Feature usage share                  | Доля пользователей, использовавших указанную фичу           |
| Avg target actions per user          | Среднее количество целевых действий на пользователя         |
| Retention (cohort)                   | Удержание по когортам                                       |
| NPS                                  | Net Promoter Score                                          |
| Conversion to action                 | Конверсия в целевое действие                                |
| Conversion to purchase               | Конверсия в покупку                                         |
| ARPU                                 | Средняя выручка на пользователя                             |
| ARPDAU                               | Средняя выручка на активного пользователя в день            |
| ARPPDAU                              | Выручка на платящего активного пользователя в день          |
| LTV (per user, mean)                 | Lifetime Value                                              |
| Средняя длительность сессии          | Среднее время активности сессии                             |
| Среднее число сессий на пользователя | Среднее количество сессий на одного пользователя            |
| Среднее число ошибок на сессию       | Среднее количество ошибок в рамках одной сессии             |  

## Возможности

- Сопоставление колонок в сайдбаре для любых CSV  
- Поддержка временных режимов (UTC, naive)  
- Фильтрация по датам и разрезам (`device_type`, `channel`, `feature`)  
- Экспорт рассчитанных метрик в CSV  

## Описание
Version 1.0
- Проект включает в себя работу с метриками и библиотеками на python для анализа и визуализации данных. 
- Используя это приложение пользователь сможет загрузить датасет, выбрать необходимые поля для подсчета и посчитать сами метрики.


